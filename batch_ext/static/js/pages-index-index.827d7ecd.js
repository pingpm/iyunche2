(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{1244:function(e,t,i){"use strict";var a=i("30c5"),s=i.n(a);s.a},"1ea2":function(e,t,i){"use strict";var a=i("af9e"),s=i("1c06"),r=i("ada5"),n=i("5d6e"),o=Object.isExtensible,d=a((function(){o(1)}));e.exports=d||n?function(e){return!!s(e)&&((!n||"ArrayBuffer"!==r(e))&&(!o||o(e)))}:o},"30c5":function(e,t,i){var a=i("9dd1");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("967d").default;s("0cfe17de",a,!0,{sourceMap:!1,shadowMode:!1})},"4fcf":function(e,t,i){"use strict";i("6a54");var a=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i("fcf3")),r=a(i("b7c7")),n=a(i("39d8"));i("795c"),i("c223"),i("bf0f"),i("aa9c"),i("5c47"),i("2c10"),i("2797"),i("4626"),i("5ac7"),i("8f71"),i("fd3c"),i("23f4"),i("7d2f"),i("9c4e"),i("ab80"),i("f3f7"),i("18f7"),i("de6c"),i("5ef2");var o={data:function(){return{showSearchList:!1,batchSend:!0,shipName:"",sendOther:[{title:"听通知放车",keyName:"isNotifyDeliver",option:[{title:"是",selected:!1},{title:"否",selected:!0}]},{title:"验车照片",keyName:"isCheckImg",option:[{title:"是",selected:!0},{title:"否",selected:!1}]},{title:"交车照片",keyName:"isDeliverImg",option:[{title:"是",selected:!1},{title:"否",selected:!0}]},{title:"交车视频",keyName:"isDeliverVideo",option:[{title:"是",selected:!1},{title:"否",selected:!0}]},{title:"提车位置照片",keyName:"isCarryLocationImg",option:[{title:"是",selected:!1},{title:"否",selected:!0}]},{title:"是否重要客户",keyName:"isImportant",option:[{title:"是",selected:!1},{title:"否",selected:!0}]},{title:"交车位置照片",keyName:"isDeliverLocationImg",option:[{title:"是",selected:!1},{title:"否",selected:!0}]},{title:"确认提车照片",keyName:"isCarryImg",option:[{title:"是",selected:!1},{title:"否",selected:!0}]}],driver:{nameo:"",phone:"",idcard:"",plateno:""},currentSelectColor:{name:"选择",color1:"#fafafa",color2:"#999999",color3:"#999999"},showColorList:!1,zhongjiao:{nameo:"",plateColor:"",plateno:"",phone:""},plateColorList:[{name:"蓝色",color1:"#0237A9",color2:"#0237A9",color3:"#ffffff"},{name:"黄色",color1:"#FFBE00",color2:"#FFBE00",color3:"#000000"},{name:"黄绿",color1:"#FFBE00",color2:"#80C278",color3:"#000000"}],deliverBook:{webUrl:""},showPlantNo:!0,deliverBookImageType:[{name:"管家确认单",value:"1001",selected:!0},{name:"客户确认单",value:"1002",selected:!1}],selectedNum:0,showSug:!1,swiperList:[{title:"批量竞价",selected:!1,cType:0},{title:"批量派单",selected:!1,cType:1},{title:"批量指派提/送",selected:!1,cType:2},{title:"批量到达/提车",selected:!1,cType:2},{title:"批量配板/发运",selected:!1,cType:2},{title:"批量到货",selected:!1,cType:2},{title:"批量交车",selected:!1,cType:2},{title:"批量中交兴路",selected:!1,cType:2}],dSugList:[],suggestList:[],searchText:"",currentTypeIndex:5,taskIndex:0,orderListParse:[[],[],[],[],[]],loginToken:"",apiSearverUrl:"",currentTime:{date:"",time:""},cType:"",imageType:"",cid:"",paidan:"",searchType:"",searchAddrList:"",orderList:"",orderTask:"",driverList:{},swiperItem:{selected:!1,cType:"",title:""},orderInfo:{selected:"",finnalOrderTypeName:"",orderNo:"",startPlace:"",endPlace:"",logisticsNo:"",transportTypeName:"",transportType:0,transportOrderName:"",carList:[],shipName:"",shipType:0,processStatus:{statusText:"",failedReason:""}},carInfo:{type:"",carId:""},currentDate:""}},onLoad:function(e){var t;e.token?(t="test"==e.env?"http://dms-test.iyunche.com":"https://dms.iyunche.com",this.setData({loginToken:e.token,apiSearverUrl:t})):uni.showToast({title:"当前未登录",icon:"none"});this.GetDriverList();var i=this.getCurrentDateTime();this.setData({currentTime:i})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){},methods:{ChooseColor:function(){this.setData({showColorList:!0})},SelectColor:function(e){var t=e.currentTarget.dataset.id,i=this.zhongjiao,a=this.plateColorList,s=a[t];i.plateColor=a[t].name,this.setData({currentSelectColor:s,zhongjiao:i,showColorList:!1})},bindDateChange:function(e){var t=this.currentTime;t.date=e.detail.value,this.setData({currentTime:t})},bindTimeChange:function(e){var t=this.currentTime;t.time=e.detail.value,this.setData({currentTime:t})},getCurrentDateTime:function(){var e=new Date,t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),n="".concat(t,"-").concat(i,"-").concat(a),o="".concat(s,":").concat(r);return{date:n,time:o}},ClickFunction:function(e){var t=this.searchText;if(t.length<19)uni.showToast({title:"请输入订单号",icon:"none"});else{for(var i=e.currentTarget.dataset.id,a=e.currentTarget.dataset.ctype,s=this.swiperList,r=0;r<s.length;r++)s[r].selected=r==i;this.setData({swiperList:s}),0==i?(console.log("批量竞价"),this.setData({currentTypeIndex:7,showPlantNo:!1,cType:a})):1==i?(console.log("批量派单"),this.setData({currentTypeIndex:8,showPlantNo:!1,cType:a})):2==i?(console.log("批量指派"),this.setData({currentTypeIndex:5,showPlantNo:!1,cType:a})):3==i?(console.log("批量提车"),this.setData({currentTypeIndex:0,cType:a})):4==i?(console.log("批量发运"),this.setData({currentTypeIndex:1,cType:a})):5==i?(console.log("批量到货"),this.setData({currentTypeIndex:2,cType:a})):6==i?(console.log("批量交车"),this.setData({currentTypeIndex:3,cType:a})):7==i&&(console.log("批量中交兴路"),this.setData({currentTypeIndex:5,showPlantNo:!0,cType:a})),this.SearchOrder(),console.log(this)}},ChooseMedia:function(e){var t,i,a=this,s=e.currentTarget.dataset.type;"deliverBook"==s&&(t="/dms-boot/basicServ/file/uploadImage",i="deliverBook"),uni.chooseImage({count:1,mediaType:["image"],complete:function(e){if("chooseImage:ok"==e.errMsg){if(e.tempFilePaths.length>0){var s=e.tempFilePaths[0];a.UploadMedia(t,s,i)}}else uni.showToast({title:"取消选择",icon:"none"})}})},UploadMedia:function(e,t,i){var a=this;uni.showLoading({title:"上传中..."});var s=this.apiSearverUrl,r=this.loginToken,o={imageType:i};uni.uploadFile({filePath:t,name:"file",url:s+e,method:"POST",header:{"x-access-token":r},formData:o,complete:function(e){uni.hideLoading();var t=JSON.parse(e.data);t.result.webUrl=t.result.imagePrefix+t.result.imageUrl,a.setData((0,n.default)({},i,t.result))}})},PreviewImage:function(e){var t=e.currentTarget.dataset.url;uni.previewImage({urls:[t]})},DelImg:function(e){var t=e.currentTarget.dataset.id;this.setData((0,n.default)({},t,""))},ChangeSelected:function(e){for(var t=e.currentTarget.dataset.id,i=this.deliverBookImageType,a=0;a<i.length;a++)i[a].selected=a==t;this.setData({deliverBookImageType:i})},SetDeliverBook:function(){this.setData({taskIndex:0}),this.UploadDeliverBookCar()},UploadDeliverBookCar:function(){var e=this;if(this.deliverBook.webUrl){uni.showLoading({title:"设置图片",musk:!0});var t,i=this.apiSearverUrl,a=this.loginToken,s=this.deliverBookImageType,r=this.deliverBook,n=this.selectedNum;if(0!=n){var o=this.orderListParse,d=this.taskIndex,c=this.currentTypeIndex;if(o[c].length!=d){for(var l=o[c][d],u=0;u<s.length;u++)if(s[u].selected){t=s[u];break}var v={logisticsCarId:l.listPkid,bookItemValue:t.value,bookItemName:t.name,bookName:r.fileName,bookPath:r.relativePathName,bookUrl:r.webUrl,source:"dms",type:1};uni.request({url:i+"/dms-boot/image/uploadDeliverBookCar",method:"POST",header:{"x-access-token":a},data:v,complete:function(t){uni.hideLoading(),e.DeliverCar(l.listPkid).then((function(t){o[c][d].processStatus.statusText="处理成功",e.setData({orderListParse:o,taskIndex:d+1}),e.UploadDeliverBookCar()}))}})}else uni.showToast({title:"处理完成"})}else uni.showToast({title:"请先选择物流单",icon:"none"})}else uni.showToast({title:"请先上传图片",icon:"none"})},DeliverCar:function(e){var t=this;return new Promise((function(i,a){uni.showLoading({title:"交车中..."});var s=t.apiSearverUrl,r=t.loginToken,n={logisticsCarId:e,address:"",longitude:"",latitude:""};uni.request({url:s+"/dms-boot/logistics/deliverCar",method:"POST",header:{"x-access-token":r},data:n,complete:function(e){uni.hideLoading(),e.data.success||uni.showToast({title:e.data.message}),i()}})}))},SetArriveLocationTask:function(){this.setData({taskIndex:0}),this.SetArriveLocation()},SetArriveLocation:function(){var e=this,t=this.apiSearverUrl,i=this.loginToken,a=this.selectedNum;if(0!=a){var s=this.orderListParse,r=this.taskIndex,n=this.currentTypeIndex;if(s[n].length!=r){if(!s[n][r].selected)return s[n][r].processStatus.statusText="不处理",s[n][r].processStatus.failedReason="未选择的不处理",this.setData({taskIndex:r+1}),void this.SetArriveLocation();var o=s[n][r],d=this.currentTime,c=d.date+" "+d.time+":00",l={logisticsCarId:o.listPkid,type:1,arriveTime:c,address:"",lng:"",lat:""};uni.request({url:t+"/dms-boot/logistics/saveArriveLocation",method:"POST",header:{"x-access-token":i},data:l,complete:function(t){uni.hideLoading(),500==t.data.code?(s[n][r].processStatus.statusText="处理失败",s[n][r].processStatus.failedReason=t.data.message):s[n][r].processStatus.statusText="处理成功",e.setData({orderListParse:s,taskIndex:r+1}),e.SetArriveLocation()}})}else uni.showToast({title:"处理完成"})}else uni.showToast({title:"请先选择物流单",icon:"none"})},ConfirmTakeCarTask:function(){this.setData({taskIndex:0}),this.ConfirmTakeCar()},ConfirmTakeCar:function(){var e=this;uni.showLoading({title:"提车中",musk:!0});var t=this.apiSearverUrl,i=this.loginToken,a=this.selectedNum;if(0!=a){var s=this.orderListParse,r=this.taskIndex,n=this.currentTypeIndex;if(s[n].length!=r){var o=s[n][r];if(!s[n][r].selected)return s[n][r].processStatus.statusText="不处理",s[n][r].processStatus.failedReason="未选择的不处理",this.setData({taskIndex:r+1}),void this.ConfirmTakeCar();console.log(this);var d=this.currentTime;this.GetBasicOrderInfo(o.orderId).then((function(a){console.log(a);var c={logisticsCarId:o.listPkid,isCarry:1,manualTime:d.date+" "+d.time+":00",address:a.data.result.startAddress,longitude:"",latitude:""};console.log(c,o),uni.request({url:t+"/dms-boot/logistics/confirmCarryCar",method:"POST",header:{"x-access-token":i},data:c,complete:function(t){uni.hideLoading(),500==t.data.code?(s[n][r].processStatus.statusText="处理失败",s[n][r].processStatus.failedReason=t.data.message):s[n][r].processStatus.statusText="处理成功",e.setData({orderListParse:s,taskIndex:r+1}),e.ConfirmTakeCar()}})}))}else uni.showToast({title:"处理完成"})}else uni.showToast({title:"请先选择物流单",icon:"none"})},ConfirmArriveTask:function(){this.setData({taskIndex:0}),this.ConfirmArrive()},ConfirmArrive:function(){var e=this;uni.showLoading({title:"到货中",musk:!0});var t=this.apiSearverUrl,i=this.loginToken,a=this.selectedNum;if(0!=a){var s=this.orderListParse,r=this.taskIndex,n=this.currentTypeIndex;if(s[n].length!=r){var o=s[n][r];if(!s[n][r].selected)return s[n][r].processStatus.statusText="不处理",s[n][r].processStatus.failedReason="未选择的不处理",this.setData({taskIndex:r+1}),void this.ConfirmArrive();var d={logisticsCarId:o.listPkid,status:3};console.log(d,o),uni.request({url:t+"/dms-boot/logistics/updateLogisticsCarStatus",method:"POST",header:{"x-access-token":i},data:d,complete:function(t){uni.hideLoading(),console.log(t),500==t.data.code?(s[n][r].processStatus.statusText="处理失败",s[n][r].processStatus.failedReason=t.data.message):s[n][r].processStatus.statusText="处理成功",e.setData({orderListParse:s,taskIndex:r+1}),e.ConfirmArrive()}})}else uni.showToast({title:"处理完成"})}else uni.showToast({title:"请先选择物流单",icon:"none"})},SetStartCarryTask:function(){this.setData({taskIndex:0}),this.SetStartCarry()},SetStartCarry:function(){var e=this;uni.showLoading({title:"发运中"});var t=this.apiSearverUrl,i=this.loginToken,a=this.selectedNum;if(0!=a){var s=this.orderListParse,r=this.taskIndex,n=this.currentTypeIndex;if(s[n].length!=r){var o=s[n][r];if(!s[n][r].selected)return s[n][r].processStatus.statusText="不处理",s[n][r].processStatus.failedReason="未选择的不处理",this.setData({taskIndex:r+1}),void this.SetStartCarry();var d={logisticsCarId:o.listPkid,status:2};console.log(d,o),uni.request({url:t+"/dms-boot/logistics/updateLogisticsCarStatus",method:"POST",header:{"x-access-token":i},data:d,complete:function(t){uni.hideLoading(),500==t.data.code?(s[n][r].processStatus.statusText="处理失败",s[n][r].processStatus.failedReason=t.data.message):s[n][r].processStatus.statusText="处理成功",e.setData({orderListParse:s,taskIndex:r+1}),e.SetStartCarry()}})}else uni.showToast({title:"处理完成"})}else uni.showToast({title:"请先选择物流单",icon:"none"})},GetBasicOrderInfo:function(e){var t=this;return new Promise((function(i,a){uni.showLoading({title:"查询订单信息"});var s=t.apiSearverUrl,r=t.loginToken,n={orderId:e};uni.request({url:s+"/dms-boot/order/getOrderBaseInfo",header:{"x-access-token":r},data:n,complete:function(e){uni.hideLoading(),i(e)}})}))},ChangeSearchInput:function(e){var t=e.detail.value;this.setData({searchText:t})},ChangeOption:function(e){for(var t=this.sendOther,i=e.currentTarget.dataset.id1,a=e.currentTarget.dataset.id2,s=0;s<t[i].option.length;s++)t[i].option[s].selected=s==a;this.setData({sendOther:t})},ChangeInput:function(e){var t=e.target.dataset.name,i=e.target.dataset.name2,a=e.detail.value;if("driver"==t){var s=this.driver;if(s[i]=a,this.setData({driver:s}),"nameo"==i){var r=this.driverList,n=this.findIndexesOfMatches(r.str,a),o=[];if(n.length>0){for(var d=0;d<n.length;d++)o.push(r.arr[n[d]]);this.setData({dSugList:o,showSug:!0})}else this.setData({dSugList:[],showSug:!1});0==a.length&&this.setData({dSugList:[],showSug:!1})}}else if("zhongjiao"==t){var c=this.zhongjiao;c[i]=a,this.setData({zhongjiao:c})}else if(t="paidan"){var l,u,v=this.paidan;if(v[i]=a,0==a.length&&this.setData({showSearchList:!1}),"startPointAddress"==i||"endPointAddress"==i)"startPointAddress"==i&&(v.startPoint="",l=v.startCityName,u="start"),"endPointAddress"==i&&(v.endPoint="",l=v.endCityName,u="end"),this.GetAddrSuggestList(a,l),this.setData({paidan:v,searchType:u})}},GetAddrSuggestList:function(e,t){var i=this,a="\n          https://restapi.amap.com/v3/place/text?s=rsv3&children=&key=28da9b7a9bd325f85f2c32f07474901c&city=".concat(t,"&page=1&offset=10&language=zh_cn&jscode=f85e16dc986c55771a70a1689f0dd77e&platform=JS&logversion=2.0&appname=http%3A%2F%2Fdms-test.iyunche.com%2Fdashboard%2Fanalysis&csid=A7DB94F4-EC26-45E9-B875-511AD4E7F666&sdkversion=1.4.27&keywords=").concat(e);uni.request({url:a,complete:function(e){e.data.pois||i.setData({showSearchList:!1}),200==e.statusCode&&i.setData({showSearchList:!0,searchAddrList:e.data.pois})}})},ChooseAddr:function(e){var t=e.currentTarget.dataset.id,i=this.searchType,a=this.searchAddrList,s=this.paidan;"start"==i?(s.startAddress=a[t].name,s.startPointAddress=a[t].address,s.startPoint=a[t].location):(s.endAddress=a[t].name,s.endPointAddress=a[t].address,s.endPoint=a[t].location),this.setData({paidan:s,showSearchList:!1})},SetZhongjiao:function(){var e=this.zhongjiao;if(e.plateno.length<6)uni.showToast({title:"车牌号不能少于6位",icon:"none"});else if(e.nameo.length<2)uni.showToast({title:"姓名不能少于2位",icon:"none"});else if(e.plateColor.length<2)uni.showToast({title:"车牌颜色不能为空",icon:"none"});else if(11==e.phone.length){var t=this.loginToken?this.loginToken:"";t?this.SetCTDriver():uni.showToast({title:"当前未登录",icon:"none"})}else uni.showToast({title:"手机号需要为11位",icon:"none"})},SetCTDriver:function(){var e=this,t=this.zhongjiao,i=this.taskIndex,a=this.apiSearverUrl,s=this.orderListParse,r=this.currentTypeIndex,n=this.loginToken?this.loginToken:"";if(s[r].length!=i){if(!s[r][i].selected)return s[r][i].processStatus.statusText="不处理",s[r][i].processStatus.failedReason="未选择的不处理",this.setData({taskIndex:i+1}),void this.SetCTDriver();var o={sourceType:"GPS",logisticsId:s[r][i].logisticsId,name:t.nameo,plateNo:t.plateno,plateColor:t.plateColor,phone:t.phone};uni.showLoading({title:"请稍后..."}),uni.request({url:a+"/dms-boot/tLocation/saveGpsDriver",method:"POST",header:{"x-access-token":n},data:o,complete:function(t){uni.hideLoading(),200==t.data.code&&(s[r][i].processStatus.statusText="处理成功",e.setData({orderListParse:s})),e.setData({taskIndex:i+1}),e.SetCTDriver()}})}else uni.showToast({title:"处理完成",icon:"none"})},startPaidan:function(){var e=this.loginToken?this.loginToken:"";e?this.paidanFun():uni.showToast({title:"当前未登录",icon:"none"})},checkDateTimeFormat:function(e){var t=e.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/);if(!t)return!1;var i=+t[1],a=+t[2],s=+t[3],r=+t[4],n=+t[5],o=+t[6];if(a<1||a>12||s<1||s>31||r>23||n>59||o>59)return!1;var d=new Date(i,a-1,s,r,n,o);return d.getFullYear()===i&&d.getMonth()===a-1&&d.getDate()===s&&d.getHours()===r&&d.getMinutes()===n&&d.getSeconds()===o},paidanFun:function(){for(var e=this,t=this.taskIndex,i=this.apiSearverUrl,a=this.orderListParse,s=this.currentTypeIndex,r=this.loginToken?this.loginToken:"",n=this.sendOther,o=0,d=0,c=0,l=0,u=0,v=0,p=0,h=0,f=0;f<n.length;f++)"isNotifyDeliver"==n[f].keyName&&n[f].option[0].selected&&(o=1),"isCheckImg"==n[f].keyName&&n[f].option[0].selected&&(d=1),"isDeliverImg"==n[f].keyName&&n[f].option[0].selected&&(c=1),"isDeliverVideo"==n[f].keyName&&n[f].option[0].selected&&(l=1),"isCarryLocationImg"==n[f].keyName&&n[f].option[0].selected&&(u=1),"isCarryImg"==n[f].keyName&&n[f].option[0].selected&&(v=1),"isDeliverLocationImg"==n[f].keyName&&n[f].option[0].selected&&(p=1),"isImportant"==n[f].keyName&&n[f].option[0].selected&&(h=1);if(a[s].length!=t){var g=a[s][t].orderInfo;if(!a[s][t].selected)return a[s][t].processStatus.statusText="不处理",a[s][t].processStatus.failedReason="未选择的不处理",this.setData({taskIndex:t+1}),void this.paidanFun();if(6!=a[s][t].finalOrderType){var m={logisticsOrderInfo:{orderNo:a[s][t].orderNo,bidCarrierId:a[s][t].bidCarrierList[0].pkId,startProvId:g.startProvId,startProvName:g.startProvName,startCityId:g.startCityId,startCityName:g.startCityName,startAddress:g.startAddress,startPoint:g.startPoint,startPointAddress:g.startPointAddress,isStorageOut:0,storageNoOut:"",storageNameOut:"",startUser:g.startUser,startPhone:g.startPhone,startTime:g.startTime,endProvId:g.endProvId,endProvName:g.endProvName,endCityId:g.endCityId,endCityName:g.endCityName,endAddress:g.endAddress,endPointAddress:g.endPointAddress,isStorageIn:0,storageNoIn:"",storageNameIn:"",endPoint:g.endPoint,endUser:g.endUser,endPhone:g.endPhone,endTime:g.endTime,deliverMode:2,deliverDocType:"1001",deliverDocName:"管家确认单",isNotifyDeliver:o,isCheckImg:d,isDeliverImg:c,isDeliverVideo:l,isCarryLocationImg:u,isCarryImg:v,isDeliverLocationImg:p,isImportant:h,remark:""},serveNotesList:[],serveList:[],orderFlowMain:null};uni.showLoading({title:"请稍后..."}),uni.request({url:i+"/dms-boot/logistics/saveLogisticsOrder",method:"POST",header:{"x-access-token":r},data:m,complete:function(i){uni.hideLoading(),200==i.data.code?(a[s][t].processStatus.statusText="处理成功",e.setData({orderListParse:a})):(a[s][t].processStatus.statusText="处理失败",a[s][t].processStatus.failedReason=i.data.message,e.setData({orderListParse:a}),uni.showToast({title:i.data.message,icon:"none",duration:2e3})),e.setData({taskIndex:t+1}),e.paidanFun()}})}else uni.showToast({title:"暂不支持车务散单",icon:"none"})}else uni.showToast({title:"任务完成",icon:"none"})},ClickDriverSug:function(e){var t=e.currentTarget.dataset.id,i=this.dSugList;this.setData({driver:{phone:i[t].phone,nameo:i[t].name,idcard:i[t].idCard,plateno:i[t].plateNo},showSug:!1})},findIndexesOfMatches:function(e,t){var i=t.toLowerCase(),a=[];return e.forEach((function(e,t){e.toLowerCase().includes(i)&&a.push(t)})),a},findIndexesOfMatchesShort:function(e,t){var i=t.toLowerCase();return e.map((function(e,t){return e.toLowerCase().includes(i)?t:-1})).filter((function(e){return-1!==e}))},extractUniqueOrderNumbers:function(e,t){var i=new RegExp("\\b".concat(t,"\\d{17}\\b"),"g"),a=e.match(i)||[],s=(0,r.default)(new Set(a));return s},SearchOrder:function(){var e=this.searchText;if(e.length<19)uni.showToast({title:"请输入订单号",icon:"none"});else{for(var t=this.extractUniqueOrderNumbers(e,"YC"),i=[],a=0;a<t.length;a++)i.push(t[a]);this.setData({orderList:i}),this.SearchOrderFromAll(i)}},SearchOrderFromAll:function(e){var t=this,i=this,a=this.loginToken?this.loginToken:"";if(a){var s=this.apiSearverUrl;uni.showLoading({title:"搜索中"});for(var r="",n=0;n<e.length;n++)r=r+e[n]+",";var o={createtimeSt:this.getCustomDate(-180).date,createtimeEn:this.getCustomDate(0).date,orderno:r,pageNo:1,pageSize:1e4};uni.request({url:"".concat(s,"/dms-boot/order/getAllOrderList"),header:{"x-access-token":a},data:o,complete:function(a){uni.hideLoading(),0==a.data.result.records.length&&(console.log("尝试搜索散户"),i.SearchRetailOrder(r).then((function(e){console.log(e)})));for(var s=[],n=[],o=0;o<a.data.result.records.length;o++)n.push(a.data.result.records[o].orderno);for(var d=0;d<e.length;d++)if(n.indexOf(e[d])>-1){var c,l,u=a.data.result.records[n.indexOf(e[d])].orderType;10==u?(c=4,l="大客户"):7==u?(c=1,l="到家"):8==u?(c=3,l="到店"):11==u?(c=5,l="散户"):12==u&&(c=6,l="车务"),s[d]={orderNo:a.data.result.records[n.indexOf(e[d])].orderno,allOrderType:u,finalOrderType:c,finnalOrderTypeName:l}}else s[d]={orderNo:e[d],allOrderType:"",finalOrderType:3,finnalOrderTypeName:"到店"};t.setData({orderTask:s,taskIndex:0,orderListParse:[[],[],[],[],[]]}),t.GetOrderInfo(0)}})}else uni.showToast({title:"当前未登录",icon:"none"})},SearchRetailOrder:function(e){var t=this;return new Promise((function(i,a){var s={createtimeSt:t.getCustomDate(-180).date,createtimeEn:t.getCustomDate(0).date,orderno:e,pageNo:1,pageSize:1e4};uni.request({url:"".concat(apiSearverUrl,"/dms-boot/order/toRetail/getOrderList"),header:{"x-access-token":loginToken},data:s,complete:function(e){uni.hideLoading(),i(e)}})}))},GetOrderInfo:function(e){var t=this,i=this.loginToken?this.loginToken:"",a=this.currentTypeIndex,r=this.cType;if(i){var n=this.apiSearverUrl,o="".concat(n,"/dms-boot/logistics/toHome/getLogisticsCarList"),d="0,1,2,3",c="";if(0==r)return uni.showToast({title:"功能开发中",icon:"none"}),void(c="0,1");1==r&&(o="".concat(n,"/dms-boot/order/toBigCust/getOrderList"),d="2,3,4",c="0,1"),uni.showLoading({title:"搜索".concat(e+1,"详情")});var l=this.orderTask,u=l[e].orderNo,v=l[e].finalOrderType,p={orderType:v,orderNo:u,assignStatus:c,dateType:"1",startDate:this.getCustomDate(-180).date,endDate:this.getCustomDate(1).date,status:d,page:1,pageSize:1e3};uni.request({url:o,method:"POST",header:{"x-access-token":i},data:p,complete:function(i){if(uni.hideLoading(),i.data.result&&i.data.result.records){var n=i.data.result.records,o=t.orderListParse;if(n.length>0){console.log("搜索到了订单");for(var d=function(i){if(o[a]||(o[a]=[]),2==r)0==n[i].status?u="待提车":1==n[i].status?u="待发运":2==n[i].status?u="运输中":3==n[i].status?u="已到货":4==n[i].status&&(u="已交车"),1==n[i].transportOrder?v="转运一段":2==n[i].transportOrder?v="转运二段":3==n[i].transportOrder?v="转运三段":4==n[i].transportOrder?v="转运四段":5==n[i].transportOrder&&(v="转运五段"),o[n[i].status]||(o[n[i].status]=[]),0==a||1==a||2==a||3==a?o[n[i].status].push({orderNo:n[i].orderNo,selected:!0,allOrderType:l[e].allOrderType,finalOrderType:l[e].finalOrderType,finnalOrderTypeName:l[e].finnalOrderTypeName,orderType:"",orderId:n[i].orderId,customerName:n[i].custName,logisticsNo:n[i].logisticsNo,startPlace:n[i].startCityName,endPlace:n[i].endCityName,shipName:n[i].carrierName,shipType:n[i].carrierType,transportOrder:n[i].transportOrder,transportOrderName:v,transportType:n[i].transportType,transportTypeName:0==n[i].transportType?"直运":"转运",carList:[{series:n[i].seriesName,type:n[i].modelName,carId:n[i].carVin}],orderStatus:n[i].status,shipStatus:u,processStatus:{statusText:"",failedReason:""},logisticsId:n[i].logisticsId,listPkid:n[i].pkId}):(1!=n[i].carrierType&&o[n[i].status].push({orderNo:n[i].orderNo,selected:!0,allOrderType:l[e].allOrderType,finalOrderType:l[e].finalOrderType,finnalOrderTypeName:l[e].finnalOrderTypeName,orderType:"",orderId:n[i].orderId,customerName:n[i].custName,logisticsNo:n[i].logisticsNo,startPlace:n[i].startCityName,endPlace:n[i].endCityName,shipName:n[i].carrierName,shipType:n[i].carrierType,transportOrder:n[i].transportOrder,transportOrderName:v,transportType:n[i].transportType,transportTypeName:0==n[i].transportType?"直运":"转运",carList:[{series:n[i].seriesName,type:n[i].modelName,carId:n[i].carVin}],orderStatus:n[i].status,shipStatus:u,processStatus:{statusText:"",failedReason:""},logisticsId:n[i].logisticsId,listPkid:n[i].pkId}),5==a&&o[a].push({orderNo:n[i].orderNo,selected:!0,allOrderType:l[e].allOrderType,finalOrderType:l[e].finalOrderType,finnalOrderTypeName:l[e].finnalOrderTypeName,orderType:"",orderId:n[i].orderId,customerName:n[i].custName,logisticsNo:n[i].logisticsNo,startPlace:n[i].startCityName,endPlace:n[i].endCityName,shipName:n[i].carrierName,shipType:n[i].carrierType,transportOrder:n[i].transportOrder,transportOrderName:v,transportType:n[i].transportType,transportTypeName:0==n[i].transportType?"直运":"转运",carList:[{series:n[i].seriesName,type:n[i].modelName,carId:n[i].carVin}],orderStatus:n[i].status,shipStatus:u,processStatus:{statusText:"",failedReason:""},logisticsId:n[i].logisticsId,listPkid:n[i].pkId})),t.setData({orderListParse:o,selectedNum:o[a]&&o[a].length?o[a].length:0}),l&&e<l.length-1&&t.GetOrderInfo(e+1);else if(0==r);else if(1==r){if(0!=n[i].transportType)return uni.showToast({title:"暂不支持转运订单",icon:"none"}),{v:void 0};t.GetOrderCampaignInfo(n[i].pkId).then((function(s){o[a].push({orderInfo:s.orderInfo,bidCarrierList:s.bidCarrierList,orderNo:n[i].orderNo,selected:!0,allOrderType:l[e].allOrderType,finalOrderType:l[e].finalOrderType,finnalOrderTypeName:l[e].finnalOrderTypeName,orderType:"",orderId:n[i].orderId,customerName:n[i].custName,logisticsNo:n[i].logisticsNo,startPlace:n[i].startCityName,endPlace:n[i].endCityName,shipName:"[未派]"+n[i].carrierName,shipType:n[i].carrierType,transportOrder:n[i].transportOrder,transportOrderName:v,transportType:n[i].transportType,transportTypeName:0==n[i].transportType?"直运":"转运",carList:[{series:n[i].seriesName,type:n[i].modelName,carId:n[i].carVin}],orderStatus:n[i].status,shipStatus:u,processStatus:{statusText:"",failedReason:""},logisticsId:n[i].logisticsId,listPkid:n[i].pkId}),t.setData({orderListParse:o,selectedNum:o[a]&&o[a].length?o[a].length:0}),l&&e<l.length-1&&t.GetOrderInfo(e+1),0==e&&t.setData({shipName:n[i].carrierName})}))}},c=0;c<n.length;c++){var u,v,p=d(c);if("object"===(0,s.default)(p))return p.v}}}else uni.showToast({title:"系统错误，请重试",icon:"none"})}})}else uni.showToast({title:"当前未登录",icon:"none"})},GetOrderCampaignInfo:function(e){var t=this,i=this.loginToken?this.loginToken:"",a=this.apiSearverUrl,s="".concat(a,"/dms-boot/order/toBigCust/getOrderDetail"),r={orderId:e,isCar:1,isFlow:1,isBid:1};return new Promise((function(e,a){uni.request({url:s,method:"POST",header:{"x-access-token":i},data:r,complete:function(i){t.setData({paidan:i.data.result.orderInfo}),e({orderInfo:i.data.result.orderInfo,bidCarrierList:i.data.result.bidCarrierList})}})}))},ChooseCar:function(e){var t=e.currentTarget.dataset.id,i=this.orderListParse,a=this.currentTypeIndex;i[a][t].selected=!i[a][t].selected;for(var s=0,r=0;r<i[a].length;r++)i[a][r].selected&&s++;this.setData({orderListParse:i,selectedNum:s})},GetDriverList:function(){var e=this,t=this.loginToken?this.loginToken:"";if(t){var i=this.apiSearverUrl;uni.showLoading({title:"获取司机"}),uni.request({url:"".concat(i,"/dms-boot/logistics/getAssignerList"),method:"POST",header:{"x-access-token":t},data:{},complete:function(t){uni.hideLoading();for(var i=t.data.result,a=[],s=0;s<i.length;s++)a.push(i[s].name+"-"+i[s].phone+"-"+i[s].plateNo);e.setData({driverList:{arr:i,str:a}})}})}else uni.showToast({title:"当前未登录",icon:"none"})},CopyResult:function(){var e=this.resultStr;uni.setClipboardData({data:e})},getCustomDate:function(e){var t=new Date;t.setDate(t.getDate()+e);var i=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),r=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0"),d={date:"".concat(i,"-").concat(a,"-").concat(s),time:"".concat(i,"-").concat(a,"-").concat(s," ").concat(r,":").concat(n,":").concat(o)};return d},SetDriver:function(e){var t=e.currentTarget.dataset.type,i=this.driver;!i.nameo||i.nameo.length<2?uni.showToast({title:"司机姓名不能为空或太短",icon:"none"}):!i.phone||i.phone.length<8?uni.showToast({title:"司机手机号不能为空或太短",icon:"none"}):!i.idcard||i.phone.idcard<18?uni.showToast({title:"司机身份证不能为空或太短",icon:"none"}):!i.plateno||i.phone.plateno<6?uni.showToast({title:"司机车牌号不能为空或太短",icon:"none"}):this.SetOrderDriver(t)},SetOrderDriver:function(e){var t=this,i=this.loginToken?this.loginToken:"";if(i){var a=this.apiSearverUrl,s=this.currentTypeIndex,r=this.taskIndex,n=this.orderListParse;if(n[s]&&0!=n[s].length)if(0!=this.selectedNum){if(n[s].length==r)return uni.showToast({title:"执行完成",icon:"none",duration:2e3}),void this.setData({taskIndex:0});if(!n[s][r].selected)return n[s][r].processStatus.statusText="不处理",n[s][r].processStatus.failedReason="未选择的不处理",this.setData({taskIndex:r+1}),void this.SetOrderDriver();uni.showLoading({title:"设置".concat(r+1,"中"),mask:!0});var o=this.driver,d={phone:o.phone,name:o.nameo,idCard:o.idcard,plateNo:o.plateno,logisticsCarId:n[s][r].listPkid,assignerType:e,assignMode:1,isCheckRepeat:0};uni.request({url:"".concat(a,"/dms-boot/logistics/saveAssignerCar"),method:"POST",header:{"x-access-token":i},data:d,complete:function(i){uni.hideLoading(),200==i.data.code&&(n[s][r].processStatus.statusText="处理成功",t.setData({orderListParse:n})),t.setData({taskIndex:r+1}),t.SetOrderDriver(e)}})}else uni.showToast({title:"没有选择要设置的物流单，请选择",icon:"none"});else uni.showToast({title:"没有符合条件的车辆",icon:"none"})}else uni.showToast({title:"当前未登录",icon:"none"})},GetLogisticsCarDetail:function(e){var t=this.loginToken?this.loginToken:"";if(t){var i=this.apiSearverUrl;uni.showLoading({title:"查询派单"});var a={logisticsCarId:e,isAssigner:1};uni.request({url:"".concat(i,"/dms-boot/logistics/getLogisticsCarDetail"),method:"POST",header:{"x-access-token":t},data:a,complete:function(e){uni.hideLoading()}})}else uni.showToast({title:"当前未登录",icon:"none"})}}};t.default=o},5075:function(e,t,i){"use strict";var a=i("ae5c"),s=i("71e9"),r=i("e7e3"),n=i("52df"),o=i("81a7"),d=i("1fc1"),c=i("1297"),l=i("d67c"),u=i("5112"),v=i("7e91"),p=TypeError,h=function(e,t){this.stopped=e,this.result=t},f=h.prototype;e.exports=function(e,t,i){var g,m,T,y,x,C,w,I=i&&i.that,k=!(!i||!i.AS_ENTRIES),S=!(!i||!i.IS_RECORD),N=!(!i||!i.IS_ITERATOR),b=!(!i||!i.INTERRUPTED),L=a(t,I),D=function(e){return g&&v(g,"normal",e),new h(!0,e)},P=function(e){return k?(r(e),b?L(e[0],e[1],D):L(e[0],e[1])):b?L(e,D):L(e)};if(S)g=e.iterator;else if(N)g=e;else{if(m=u(e),!m)throw new p(n(e)+" is not iterable");if(o(m)){for(T=0,y=d(e);y>T;T++)if(x=P(e[T]),x&&c(f,x))return x;return new h(!1)}g=l(e,m)}C=S?e.next:g.next;while(!(w=s(C,g)).done){try{x=P(w.value)}catch(O){v(g,"throw",O)}if("object"==typeof x&&x&&c(f,x))return x}return new h(!1)}},"53f7":function(e,t,i){"use strict";var a=i("7658"),s=i("57e7");a("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},"57e7":function(e,t,i){"use strict";var a=i("e37c"),s=i("e4ca"),r=i("a74c"),n=i("ae5c"),o=i("b720"),d=i("1eb8"),c=i("5075"),l=i("0cc2"),u=i("97ed"),v=i("437f"),p=i("ab4a"),h=i("d0b1").fastKey,f=i("235c"),g=f.set,m=f.getterFor;e.exports={getConstructor:function(e,t,i,l){var u=e((function(e,s){o(e,v),g(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),p||(e.size=0),d(s)||c(s,e[l],{that:e,AS_ENTRIES:i})})),v=u.prototype,f=m(t),T=function(e,t,i){var a,s,r=f(e),n=y(e,t);return n?n.value=i:(r.last=n={index:s=h(t,!0),key:t,value:i,previous:a=r.last,next:void 0,removed:!1},r.first||(r.first=n),a&&(a.next=n),p?r.size++:e.size++,"F"!==s&&(r.index[s]=n)),e},y=function(e,t){var i,a=f(e),s=h(t);if("F"!==s)return a.index[s];for(i=a.first;i;i=i.next)if(i.key===t)return i};return r(v,{clear:function(){var e=f(this),t=e.first;while(t)t.removed=!0,t.previous&&(t.previous=t.previous.next=void 0),t=t.next;e.first=e.last=void 0,e.index=a(null),p?e.size=0:this.size=0},delete:function(e){var t=f(this),i=y(this,e);if(i){var a=i.next,s=i.previous;delete t.index[i.index],i.removed=!0,s&&(s.next=a),a&&(a.previous=s),t.first===i&&(t.first=a),t.last===i&&(t.last=s),p?t.size--:this.size--}return!!i},forEach:function(e){var t,i=f(this),a=n(e,arguments.length>1?arguments[1]:void 0);while(t=t?t.next:i.first){a(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!y(this,e)}}),r(v,i?{get:function(e){var t=y(this,e);return t&&t.value},set:function(e,t){return T(this,0===e?0:e,t)}}:{add:function(e){return T(this,e=0===e?0:e,e)}}),p&&s(v,"size",{configurable:!0,get:function(){return f(this).size}}),u},setStrong:function(e,t,i){var a=t+" Iterator",s=m(t),r=m(a);l(e,t,(function(e,t){g(this,{type:a,target:e,state:s(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,i=e.last;while(i&&i.removed)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?u("keys"===t?i.key:"values"===t?i.value:[i.key,i.value],!1):(e.target=void 0,u(void 0,!0))}),i?"entries":"values",!i,!0),v(t)}}},"5d6e":function(e,t,i){"use strict";var a=i("af9e");e.exports=a((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},6700:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){}));var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"inputArea"},[i("v-uni-view",{staticClass:"subTitle"},[e._v("请输入订单号（支持多个）")]),i("v-uni-textarea",{attrs:{maxlength:"-1"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeSearchInput.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"menuList"},e._l(e.swiperList,(function(t,a){return i("v-uni-view",{key:a,class:"menuItem "+(t.selected?"selected":""),attrs:{"data-id":a,"data-ctype":t.cType},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ClickFunction.apply(void 0,arguments)}}},[e._v(e._s(t.title))])})),1)],1),i("v-uni-view",{staticClass:"clear"}),i("v-uni-view",{staticClass:"info"},[e._v("当前共"+e._s(e.orderListParse[e.currentTypeIndex]?e.orderListParse[e.currentTypeIndex].length:0)+"个可设置的物流单，已选择"+e._s(e.selectedNum)+"个")]),i("v-uni-scroll-view",{staticClass:"orderList",attrs:{"scroll-y":!0}},e._l(e.orderListParse[e.currentTypeIndex],(function(t,a){return e.orderListParse[e.currentTypeIndex]&&e.orderListParse[e.currentTypeIndex].length>0?i("v-uni-view",{key:a,staticClass:"orderItem",attrs:{"data-id":a},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ChooseCar.apply(void 0,arguments)}}},[t.selected?e._e():i("v-uni-view",{staticClass:"select"}),t.selected?i("v-uni-view",{staticClass:"select"},[i("v-uni-image",{attrs:{mode:"aspectFit",src:"/static/pages/images/choose.png"}})],1):e._e(),i("v-uni-view",{staticClass:"orderIndex"},[e._v(e._s(a+1))]),i("v-uni-view",{staticClass:"orderNo"},[i("v-uni-view",{staticClass:"orderNoText"},[i("v-uni-view",{staticClass:"orderType"},[e._v(e._s(t.finnalOrderTypeName))]),i("v-uni-view",{staticClass:"orderNoTextV"},[e._v(e._s(t.orderNo))])],1),i("v-uni-view",{staticClass:"orderPlace"},[e._v(e._s(t.startPlace)+"->"+e._s(t.endPlace))])],1),i("v-uni-view",{staticClass:"orderNo"},[i("v-uni-view",{staticClass:"orderNoText"},[i("v-uni-view",{staticClass:"orderNoTextV"},[e._v(e._s(t.logisticsNo))])],1),i("v-uni-view",{staticClass:"orderPlace"},[e._v(e._s(t.transportTypeName)+e._s(0==t.transportType?" ":"-"+t.transportOrderName))])],1),i("v-uni-view",{staticClass:"carInfo"},e._l(t.carList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"carInfoItem"},[i("v-uni-view",{staticClass:"carName"},[e._v(e._s(t.type))]),i("v-uni-view",{staticClass:"carId"},[e._v(e._s(t.carId))])],1)})),1),i("v-uni-view",{staticClass:"shipInfo"},[i("v-uni-view",{staticClass:"shipName"},[e._v(e._s(t.shipName))]),i("v-uni-view",{staticClass:"shipType"},[e._v(e._s(1==t.shipType?"个体司机":"物流公司"))])],1),i("v-uni-view",{staticClass:"processStatus"},[i("v-uni-view",{staticClass:"processStatusText"},[e._v(e._s(t.processStatus.statusText))]),i("v-uni-view",{staticClass:"processStatusReason"},[e._v(e._s(t.processStatus.failedReason))])],1)],1):e._e()})),1),0==e.currentTypeIndex?i("v-uni-view",{staticClass:"functions"},[i("v-uni-view",{staticClass:"functionTips"},[e._v("提车信息")]),i("v-uni-view",{staticClass:"driverInfo",staticStyle:{"flex-direction":"column"}},[i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("【提车配置】是否提到车：默认为是")])],1),i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("【提车配置】验车照片：承运商若已上传，则为 承运商上传的；如果未上传，暂不支持此处上传")])],1),i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("【到达/提车配置】地址：到达提车地时为空，确认提车时为订单上的始发地地址")])],1),i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("【到达/提车配置】时间（使用到达提车地时为到达时间，使用确认提车时为离场时间）")]),i("v-uni-picker",{staticClass:"currentDate",attrs:{mode:"date",value:e.currentDate},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindDateChange.apply(void 0,arguments)}}},[i("v-uni-view",[e._v(e._s(e.currentTime.date))])],1),i("v-uni-picker",{staticClass:"currentTime",attrs:{mode:"time",value:e.currentTime},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.bindTimeChange.apply(void 0,arguments)}}},[i("v-uni-view",[e._v(e._s(e.currentTime.time))])],1)],1)],1),i("v-uni-view",{staticClass:"functionList"},[i("v-uni-view",{staticClass:"functionItem",attrs:{"data-type":"1"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.SetArriveLocationTask.apply(void 0,arguments)}}},[e._v("到达提车地")]),i("v-uni-view",{staticClass:"functionItem",attrs:{"data-type":"1"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ConfirmTakeCarTask.apply(void 0,arguments)}}},[e._v("确认提车")])],1)],1):e._e(),1==e.currentTypeIndex?i("v-uni-view",{staticClass:"functions"},[i("v-uni-view",{staticClass:"functionTips"},[e._v("配板司机（仅批量配板需要填写）")]),i("v-uni-view",{staticClass:"driverInfo"},[i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("司机姓名:")]),i("v-uni-input",{attrs:{value:e.driver.nameo,type:"text",maxlength:"-1",placeholder:"请输入司机姓名","data-name":"driver","data-name2":"nameo"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}}),e.showSug?i("v-uni-scroll-view",{staticClass:"sugList",attrs:{"scroll-y":!0}},[e.dSugList.length>0?i("v-uni-view",{staticClass:"driverSug"},e._l(e.dSugList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"driverInfo",attrs:{"data-id":a},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ClickDriverSug.apply(void 0,arguments)}}},[e._v(e._s(t.name)+"-"+e._s(t.phone)+"-"+e._s(t.plateNo))])})),1):e._e()],1):e._e()],1),i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("电话:")]),i("v-uni-input",{attrs:{value:e.driver.phone,type:"text",maxlength:"-1",placeholder:"请输入联系电话","data-name":"driver","data-name2":"phone"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("身份证:")]),i("v-uni-input",{attrs:{value:e.driver.idcard,type:"text",maxlength:"-1",placeholder:"请输入司机身份证号","data-name":"driver","data-name2":"idcard"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("车牌:")]),i("v-uni-input",{attrs:{value:e.driver.plateno,type:"text",maxlength:"-1",placeholder:"请输入司机车牌号","data-name":"driver","data-name2":"plateno"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"functionTips"},[e._v("发运信息（此字段仅适用于批量发运）")]),i("v-uni-view",{staticClass:"driverInfo"},[i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("要求交车时间：默认为对应订单的要求交车时间")])],1)],1),i("v-uni-view",{staticClass:"functionList"},[i("v-uni-view",{staticClass:"functionItem",attrs:{"data-type":"3"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.SetDriver.apply(void 0,arguments)}}},[e._v("配板")]),i("v-uni-view",{staticClass:"functionItem",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.SetStartCarryTask.apply(void 0,arguments)}}},[e._v("发运")])],1)],1):e._e(),2==e.currentTypeIndex?i("v-uni-view",{staticClass:"functions"},[i("v-uni-view",{staticClass:"functionTips"},[e._v("到货信息")]),i("v-uni-view",{staticClass:"driverInfo",staticStyle:{"flex-direction":"column"}},[i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("到货时间：默认为对应订单的要求交车时间")])],1)],1),i("v-uni-view",{staticClass:"functionList"},[i("v-uni-view",{staticClass:"functionItem",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ConfirmArriveTask.apply(void 0,arguments)}}},[e._v("确认到货")])],1)],1):e._e(),3==e.currentTypeIndex?i("v-uni-view",{staticClass:"functions"},[i("v-uni-view",{staticClass:"functionTips"},[e._v("单据/照片信息")]),i("v-uni-view",{staticClass:"driverInfo"},[i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("交车单:")]),i("v-uni-view",{staticClass:"mediaArea"},[e.deliverBook.webUrl?e._e():i("v-uni-view",{staticClass:"uploadBtn",attrs:{"data-type":"deliverBook"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ChooseMedia.apply(void 0,arguments)}}},[e._v("上传照片")]),e.deliverBook.webUrl?i("v-uni-view",{staticClass:"image"},[i("v-uni-view",{staticClass:"delImg",attrs:{"data-id":"deliverBook"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.DelImg.apply(void 0,arguments)}}},[e._v("删除")]),i("v-uni-image",{attrs:{"data-url":e.deliverBook.webUrl,mode:"aspectFit",src:e.deliverBook.webUrl},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.PreviewImage.apply(void 0,arguments)}}})],1):e._e()],1)],1)],1),i("v-uni-view",{staticClass:"functionList"},[i("v-uni-view",{staticClass:"functionItem",attrs:{"data-type":"1"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.SetDeliverBook.apply(void 0,arguments)}}},[e._v("确认交车")])],1)],1):e._e(),5!=e.currentTypeIndex||e.showPlantNo?e._e():i("v-uni-view",{staticClass:"functions"},[i("v-uni-view",{staticClass:"functionTips"},[e._v("承运人信息")]),i("v-uni-view",{staticClass:"driverInfo"},[i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("司机姓名:")]),i("v-uni-input",{attrs:{value:e.driver.nameo,type:"text",maxlength:"-1",placeholder:"请输入司机姓名","data-name":"driver","data-name2":"nameo"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}}),e.showSug?i("v-uni-scroll-view",{staticClass:"sugList",attrs:{"scroll-y":!0}},[e.dSugList.length>0?i("v-uni-view",{staticClass:"driverSug"},e._l(e.dSugList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"driverInfo",attrs:{"data-id":a},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ClickDriverSug.apply(void 0,arguments)}}},[e._v(e._s(t.name)+"-"+e._s(t.phone)+"-"+e._s(t.plateNo))])})),1):e._e()],1):e._e()],1),i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("电话:")]),i("v-uni-input",{attrs:{value:e.driver.phone,type:"text",maxlength:"-1",placeholder:"请输入联系电话","data-name":"driver","data-name2":"phone"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("身份证:")]),i("v-uni-input",{attrs:{value:e.driver.idcard,type:"text",maxlength:"-1",placeholder:"请输入司机身份证号","data-name":"driver","data-name2":"idcard"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("车牌:")]),i("v-uni-input",{attrs:{value:e.driver.plateno,type:"text",maxlength:"-1",placeholder:"请输入司机车牌号","data-name":"driver","data-name2":"plateno"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"functionList"},[i("v-uni-view",{staticClass:"functionItem",attrs:{"data-type":"1"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.SetDriver.apply(void 0,arguments)}}},[e._v("指派提车人")]),i("v-uni-view",{staticClass:"functionItem",attrs:{"data-type":"2"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.SetDriver.apply(void 0,arguments)}}},[e._v("指派交车人")])],1)],1),5==e.currentTypeIndex&&e.showPlantNo?i("v-uni-view",{staticClass:"functions"},[i("v-uni-view",{staticClass:"functionTips"},[e._v("运输车辆信息")]),i("v-uni-view",{staticClass:"driverInfo"},[i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("*车牌:")]),i("v-uni-input",{attrs:{value:e.zhongjiao.plateno,type:"text",maxlength:"-1",placeholder:"请输入司机车牌号","data-name":"zhongjiao","data-name2":"plateno"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("*车牌颜色:")]),i("v-uni-view",{staticClass:"plateColor"},[i("v-uni-view",{staticClass:"plateNo",style:"background: "+e.currentSelectColor.color1+";border:2px solid "+e.currentSelectColor.color3+";",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.ChooseColor.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"plateLeft",style:"color: "+e.currentSelectColor.color3},[e._v(e._s(e.currentSelectColor.name))]),i("v-uni-view",{staticClass:"plateRight",style:"background: "+e.currentSelectColor.color2})],1),e.showColorList?i("v-uni-view",{staticClass:"plateColorList"},e._l(e.plateColorList,(function(t,a){return i("v-uni-view",{key:a,staticClass:"plateNo",style:"background: "+t.color1+";border:2px solid "+t.color3+";",attrs:{"data-id":a},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.SelectColor.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"plateLeft"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"plateLeft"}),i("v-uni-view",{staticClass:"plateRight",style:"background: "+t.color2})],1)})),1):e._e()],1)],1),i("v-uni-view",{staticClass:"driverItem driverName"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("司机姓名:")]),i("v-uni-input",{attrs:{value:e.zhongjiao.nameo,type:"text",maxlength:"-1",placeholder:"请输入司机姓名","data-name":"zhongjiao","data-name2":"nameo"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"driverItem"},[i("v-uni-view",{staticClass:"driverItemTitle"},[e._v("电话:")]),i("v-uni-input",{attrs:{value:e.zhongjiao.phone,type:"text",maxlength:"-1",placeholder:"请输入联系电话","data-name":"zhongjiao","data-name2":"phone"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.ChangeInput.apply(void 0,arguments)}}})],1)],1),i("v-uni-view",{staticClass:"functionList"},[i("v-uni-view",{staticClass:"functionItem",attrs:{"data-type":"1"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.SetZhongjiao.apply(void 0,arguments)}}},[e._v("设置中交车牌")])],1)],1):e._e(),8==e.currentTypeIndex?i("v-uni-view",{staticClass:"functions"},[i("v-uni-view",{staticClass:"functionTips"},[e._v("派单信息")]),i("v-uni-view",{staticClass:"functionTips2"},[e._v("批量派单时，使用的订单上的发车人和收车人信息")]),i("v-uni-view",{staticClass:"functionTips2"},[e._v("发车人信息(姓名、电话、地址）、收车人信息（姓名、电话、地址）均来源于订单上，每个订单可能不同")]),i("v-uni-view",{staticClass:"functionList paidan"},[i("v-uni-view",{staticClass:"functionItem",attrs:{"data-type":"1"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.startPaidan.apply(void 0,arguments)}}},[e._v("开始派单")])],1)],1):e._e()],1)},s=[]},"73e1":function(e,t,i){"use strict";var a=i("29d8");e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(a)},7658:function(e,t,i){"use strict";var a=i("8bdb"),s=i("85c1"),r=i("bb80"),n=i("8466"),o=i("81a9"),d=i("d0b1"),c=i("5075"),l=i("b720"),u=i("474f"),v=i("1eb8"),p=i("1c06"),h=i("af9e"),f=i("29ba"),g=i("181d"),m=i("dcda");e.exports=function(e,t,i){var T=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),x=T?"set":"add",C=s[e],w=C&&C.prototype,I=C,k={},S=function(e){var t=r(w[e]);o(w,e,"add"===e?function(e){return t(this,0===e?0:e),this}:"delete"===e?function(e){return!(y&&!p(e))&&t(this,0===e?0:e)}:"get"===e?function(e){return y&&!p(e)?void 0:t(this,0===e?0:e)}:"has"===e?function(e){return!(y&&!p(e))&&t(this,0===e?0:e)}:function(e,i){return t(this,0===e?0:e,i),this})},N=n(e,!u(C)||!(y||w.forEach&&!h((function(){(new C).entries().next()}))));if(N)I=i.getConstructor(t,e,T,x),d.enable();else if(n(e,!0)){var b=new I,L=b[x](y?{}:-0,1)!==b,D=h((function(){b.has(1)})),P=f((function(e){new C(e)})),O=!y&&h((function(){var e=new C,t=5;while(t--)e[x](t,t);return!e.has(-0)}));P||(I=t((function(e,t){l(e,w);var i=m(new C,e,I);return v(t)||c(t,i[x],{that:i,AS_ENTRIES:T}),i})),I.prototype=w,w.constructor=I),(D||O)&&(S("delete"),S("has"),T&&S("get")),(O||L)&&S(x),y&&w.clear&&delete w.clear}return k[e]=I,a({global:!0,constructor:!0,forced:I!==C},k),g(I,e),y||i.setStrong(I,e,T),I}},"795c":function(e,t,i){"use strict";var a=i("8bdb"),s=i("db04").start,r=i("73e1");a({target:"String",proto:!0,forced:r},{padStart:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},"7eb0":function(e,t,i){"use strict";i.r(t);var a=i("4fcf"),s=i.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(r);t["default"]=s.a},"9dd1":function(e,t,i){var a=i("c86c");t=a(!1),t.push([e.i,".inputArea[data-v-353f67c0]{margin-top:30px;padding:20px;box-sizing:border-box}.clear[data-v-353f67c0]{clear:both}.subTitle[data-v-353f67c0]{font-size:14px}.inputArea uni-textarea[data-v-353f67c0]{background:#fafafa;width:90%;margin:10px 0;padding:9px;font-size:14px}.orderList[data-v-353f67c0]{font-size:12px;padding:10px;height:300px}.orderItem[data-v-353f67c0]{display:flex;align-items:center;border-bottom:1px solid #f8f8f8}.carInfo[data-v-353f67c0],\n.orderStatus[data-v-353f67c0]{margin:4px 10px}.carId[data-v-353f67c0],\n.orderPlace[data-v-353f67c0],\n.shipType[data-v-353f67c0]{color:#999}.carInfoItem[data-v-353f67c0]{width:160px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.orderIndex[data-v-353f67c0]{background:#eeeded;margin:0 10px;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:4px}.seachBtn[data-v-353f67c0]{background:#000;width:100px;color:#fff;padding:10px;font-size:14px;text-align:center;border-radius:4px}.info[data-v-353f67c0]{padding:10px;font-size:14px}.processStatusReason[data-v-353f67c0]{color:#999;width:160px}.functions[data-v-353f67c0]{padding:10px;font-size:12px}.functionTips[data-v-353f67c0]{line-height:3;font-size:12px}.functionItem[data-v-353f67c0]{background:#000;color:#fff;width:120px;padding:10px 0;text-align:center;font-size:14px;border-radius:4px;margin:0 10px}.orderNoText[data-v-353f67c0]{display:flex;margin:0 4px}.orderType[data-v-353f67c0]{font-size:10px;background:#999;color:#fff;padding:3px;width:30px;text-align:center}.driverInfo[data-v-353f67c0]{display:flex;margin:10px 0}.driverItem[data-v-353f67c0]{display:flex;align-items:center}.driverItemTitle[data-v-353f67c0]{margin:4px 6px;color:#999}.driverItem.driverName[data-v-353f67c0]{position:relative}.sugList[data-v-353f67c0]{position:absolute;bottom:20px;left:60px;height:200px;background:#fff;padding:10px;z-index:100;box-shadow:0 5px 5px rgba(0,0,0,.2)}.select uni-image[data-v-353f67c0]{width:20px;height:20px}.select[data-v-353f67c0]{width:20px;height:20px;background:#dfdfdf;border:2px solid #a1a1a1;border-radius:100px;display:flex;align-items:center;justify-content:center}.shipName[data-v-353f67c0]{width:160px;white-space:nowrap;overflow:hidden}.functionList[data-v-353f67c0]{display:flex}.swiperItem[data-v-353f67c0]{background:#a5a5a5}.menuItem[data-v-353f67c0]{font-size:14px;margin:5px;width:100px;float:left;text-align:center;padding:5px 10px;background:rgba(0,0,0,.05)}.menuItem.selected[data-v-353f67c0]{\n    /* border-bottom: 2px solid #000; */background:#000;color:#fff}.uploadBtn[data-v-353f67c0]{width:100px;height:100px;display:flex;align-items:center;justify-content:center}.mediaArea[data-v-353f67c0]{background:#fafafa;position:relative}.image uni-image[data-v-353f67c0]{width:100px;height:100px}.delImg[data-v-353f67c0]{position:absolute;right:-10px;top:-10px;font-size:12px;width:40px;background:#000;color:#fff;text-align:center;line-height:2;border-radius:4px;box-shadow:0 0 5px rgba(0,0,0,.2)}.imageType[data-v-353f67c0]{display:flex}.imageTypeItem[data-v-353f67c0]{margin:0 10px;padding:4px 10px}.imageTypeItem.selected[data-v-353f67c0]{\n    /* background: #000; */border-bottom:2px solid #000}.currentDate[data-v-353f67c0],\n.currentTime[data-v-353f67c0]{background:rgba(0,0,0,.05);padding:4px 8px;margin:0 4px}.plateColor[data-v-353f67c0]{position:relative;margin-right:20px}.plateNo[data-v-353f67c0]{background:#ffbe00;border:#fff 2px solid;box-shadow:0 0 4px rgba(0,0,0,.3);border-radius:4px;display:flex;align-items:center;padding:4px;color:#fff}.plateRight[data-v-353f67c0]{background:#80c278;padding:2px 6px;margin-left:6px;min-width:20px;height:20px}.plateColorList[data-v-353f67c0]{position:absolute;bottom:40px}.plateNo[data-v-353f67c0]{margin:10px 0}.infoArea[data-v-353f67c0]{display:flex;justify-content:space-around}.addr[data-v-353f67c0]{width:300px;position:relative}.addr1[data-v-353f67c0]{color:#999;margin-top:10px}.otherArea[data-v-353f67c0]{margin-top:20px}.otherItem[data-v-353f67c0]{display:flex;float:left;width:150px;margin:10px}.otherItemTitle[data-v-353f67c0]{margin-right:10px;color:#999}.optionTitle[data-v-353f67c0]{padding:4px}.optionTitle.selected[data-v-353f67c0]{background:#000;color:#fff}.addrList[data-v-353f67c0]{position:absolute;top:-470px;background:#fff;box-shadow:0 0 10px rgba(0,0,0,.3);padding:10px;z-index:100}.addrItem[data-v-353f67c0]{margin:10px 0}.addrItemSubtitle[data-v-353f67c0]{color:#999}.functionTips2[data-v-353f67c0]{color:#999;line-height:2}.functionList.paidan[data-v-353f67c0]{margin-top:100px}",""]),e.exports=t},ae8a:function(e,t,i){"use strict";i.r(t);var a=i("6700"),s=i("7eb0");for(var r in s)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(r);i("1244");var n=i("828b"),o=Object(n["a"])(s["default"],a["b"],a["c"],!1,null,"353f67c0",null,!1,a["a"],void 0);t["default"]=o.exports},c238:function(e,t,i){"use strict";var a=i("af9e");e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},d0b1:function(e,t,i){"use strict";var a=i("8bdb"),s=i("bb80"),r=i("11bf"),n=i("1c06"),o=i("338c"),d=i("d6b1").f,c=i("80bb"),l=i("8449"),u=i("1ea2"),v=i("d7b4"),p=i("c238"),h=!1,f=v("meta"),g=0,m=function(e){d(e,f,{value:{objectID:"O"+g++,weakData:{}}})},T=e.exports={enable:function(){T.enable=function(){},h=!0;var e=c.f,t=s([].splice),i={};i[f]=1,e(i).length&&(c.f=function(i){for(var a=e(i),s=0,r=a.length;s<r;s++)if(a[s]===f){t(a,s,1);break}return a},a({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,f)){if(!u(e))return"F";if(!t)return"E";m(e)}return e[f].objectID},getWeakData:function(e,t){if(!o(e,f)){if(!u(e))return!0;if(!t)return!1;m(e)}return e[f].weakData},onFreeze:function(e){return p&&h&&u(e)&&!o(e,f)&&m(e),e}};r[f]=!0},db04:function(e,t,i){"use strict";var a=i("bb80"),s=i("c435"),r=i("9e70"),n=i("f298"),o=i("862c"),d=a(n),c=a("".slice),l=Math.ceil,u=function(e){return function(t,i,a){var n,u,v=r(o(t)),p=s(i),h=v.length,f=void 0===a?" ":r(a);return p<=h||""===f?v:(n=p-h,u=d(f,l(n/f.length)),u.length>n&&(u=c(u,0,n)),e?v+u:u+v)}};e.exports={start:u(!1),end:u(!0)}},f298:function(e,t,i){"use strict";var a=i("497b"),s=i("9e70"),r=i("862c"),n=RangeError;e.exports=function(e){var t=s(r(this)),i="",o=a(e);if(o<0||o===1/0)throw new n("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(i+=t);return i}},f3f7:function(e,t,i){"use strict";i("53f7")}}]);